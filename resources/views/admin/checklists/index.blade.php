@extends("layouts.admin")\n\n@section("title", "Checklist Management")\n@section("page-title", "Checklist Management")\n\n@section("content")\n<div class="row">\n    <div class="col-md-4">\n        <div class="card">\n            <div class="card-header">\n                <h5 class="mb-0"><i class="bi bi-plus-circle me-2"></i>Add Checklist Item</h5>\n            </div>\n            <div class="card-body">\n                <form action="{{ route("admin.checklists.store") }}" method="POST">\n                    @csrf\n                    <div class="mb-3">\n                        <label class="form-label">Exhibition</label>\n                        <select name="exhibition_id" class="form-select">\n                            <option value="">All Exhibitions</option>\n                            @foreach($exhibitions as $exhibition)\n                            <option value="{{ $exhibition->id }}">{{ $exhibition->name }}</option>\n                            @endforeach\n                        </select>\n                    </div>\n                    <div class="mb-3">\n                        <label class="form-label">Item Name <span class="text-danger">*</span></label>\n                        <input type="text" name="name" class="form-control" value="{{ old("name") }}" required>\n                    </div>\n                    <div class="mb-3">\n                        <label class="form-label">Description</label>\n                        <textarea name="description" class="form-control" rows="3">{{ old("description") }}</textarea>\n                    </div>\n                    <div class="mb-3">\n                        <div class="form-check">\n                            <input class="form-check-input" type="checkbox" name="is_required" id="is_required">\n                            <label class="form-check-label" for="is_required">Required</label>\n                        </div>\n                    </div>\n                    <div class="mb-3">\n                        <label class="form-label">Due Date (Days Before Event)</label>\n                        <input type="number" name="due_date_days_before" class="form-control" value="{{ old("due_date_days_before") }}" min="0">\n                    </div>\n                    <div class="mb-3">\n                        <div class="form-check">\n                            <input class="form-check-input" type="checkbox" name="visible_to_user" id="visible_to_user" checked>\n                            <label class="form-check-label" for="visible_to_user">Visible to User</label>\n                        </div>\n                    </div>\n                    <div class="mb-3">\n                        <div class="form-check">\n                            <input class="form-check-input" type="checkbox" name="visible_to_admin" id="visible_to_admin" checked>\n                            <label class="form-check-label" for="visible_to_admin">Visible to Admin</label>\n                        </div>\n                    </div>\n                    <button type="submit" class="btn btn-primary w-100">\n                        <i class="bi bi-check-circle me-2"></i>Add Item\n                    </button>\n                </form>\n            </div>\n        </div>\n    </div>\n    <div class="col-md-8">\n        <div class="card">\n            <div class="card-header">\n                <h5 class="mb-0"><i class="bi bi-list-check me-2"></i>Existing Checklist Items</h5>\n            </div>\n            <div class="card-body">\n                @if(session("success"))\n                <div class="alert alert-success alert-dismissible fade show" role="alert">\n                    {{ session("success") }}\n                    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>\n                </div>\n                @endif\n                <form method="GET" class="mb-3">\n                    <div class="row g-2">\n                        <div class="col-md-4">\n                            <input type="text" name="search" class="form-control" placeholder="Search..." value="{{ request("search") }}">\n                        </div>\n                        <div class="col-md-4">\n                            <select name="exhibition_id" class="form-select">\n                                <option value="">All Exhibitions</option>\n                                @foreach($exhibitions as $exhibition)\n                                <option value="{{ $exhibition->id }}" {{ request("exhibition_id") == $exhibition->id ? "selected" : "" }}>{{ $exhibition->name }}</option>\n                                @endforeach\n                            </select>\n                        </div>\n                        <div class="col-md-4">\n                            <button type="submit" class="btn btn-primary w-100">Filter</button>\n                        </div>\n                    </div>\n                </form>\n                <div class="table-responsive">\n                    <table class="table table-hover align-middle">\n                        <thead>\n                            <tr>\n                                <th>Name</th>\n                                <th>Exhibition</th>\n                                <th>Required</th>\n                                <th>Due Days</th>\n                                <th>Visibility</th>\n                                <th>Actions</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            @forelse($checklistItems as $item)\n                            <tr>\n                                <td><strong>{{ $item->name }}</strong></td>\n                                <td>{{ $item->exhibition->name ?? "All" }}</td>\n                                <td>\n                                    <span class="badge bg-{{ $item->is_required ? "danger" : "secondary" }}">\n                                        {{ $item->is_required ? "Required" : "Optional" }}\n                                    </span>\n                                </td>\n                                <td>{{ $item->due_date_days_before ?? "-" }}</td>\n                                <td>\n                                    <small class="text-muted">\n                                        @if($item->visible_to_user && $item->visible_to_admin)\n                                        User & Admin\n                                        @elseif($item->visible_to_user)\n                                        User Only\n                                        @elseif($item->visible_to_admin)\n                                        Admin Only\n                                        @else\n                                        Hidden\n                                        @endif\n                                    </small>\n                                </td>\n                                <td>\n                                    <form action="{{ route("admin.checklists.destroy", $item->id) }}" method="POST" class="d-inline" onsubmit="return confirm("Are you sure?")">\n                                        @csrf\n                                        @method("DELETE")\n                                        <button type="submit" class="btn btn-sm btn-danger">\n                                            <i class="bi bi-trash"></i>\n                                        </button>\n                                    </form>\n                                </td>\n                            </tr>\n                            @empty\n                            <tr>\n                                <td colspan="6" class="text-center">No checklist items found.</td>\n                            </tr>\n                            @endforelse\n                        </tbody>\n                    </table>\n                </div>\n                <div class="mt-3">\n                    {{ $checklistItems->links() }}\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n@endsection\n