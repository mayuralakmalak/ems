@extends("layouts.admin")\n\n@section("title", "Email Management")\n@section("page-title", "Email Notification Management")\n\n@section("content")\n<div class="card">\n    <div class="card-header">\n        <h5 class="mb-0"><i class="bi bi-envelope me-2"></i>Email Notifications</h5>\n    </div>\n    <div class="card-body">\n        @if(session("success"))\n        <div class="alert alert-success alert-dismissible fade show" role="alert">\n            {{ session("success") }}\n            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>\n        </div>\n        @endif\n        <form method="GET" class="mb-3">\n            <div class="row g-2">\n                <div class="col-md-4">\n                    <select name="category" class="form-select">\n                        <option value="">All Categories</option>\n                        <option value="event_triggered" {{ request("category") == "event_triggered" ? "selected" : "" }}>Event Triggered</option>\n                        <option value="system" {{ request("category") == "system" ? "selected" : "" }}>System</option>\n                        <option value="template" {{ request("category") == "template" ? "selected" : "" }}>Template</option>\n                    </select>\n                </div>\n                <div class="col-md-4">\n                    <button type="submit" class="btn btn-primary">Filter</button>\n                </div>\n            </div>\n        </form>\n        <div class="table-responsive">\n            <table class="table table-hover align-middle">\n                <thead>\n                    <tr>\n                        <th>Event Type</th>\n                        <th>Subject Line</th>\n                        <th>Recipients</th>\n                        <th>Category</th>\n                        <th>Status</th>\n                        <th>Actions</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    @forelse($notifications as $notification)\n                    <tr>\n                        <td><strong>{{ str_replace("_", " ", ucwords($notification->event_type)) }}</strong></td>\n                        <td>{{ $notification->subject_line }}</td>\n                        <td>\n                            @if(is_array($notification->recipients))\n                                {{ implode(", ", $notification->recipients) }}\n                            @else\n                                {{ $notification->recipients }}\n                            @endif\n                        </td>\n                        <td>\n                            <span class="badge bg-info">\n                                {{ str_replace("_", " ", ucwords($notification->category)) }}\n                            </span>\n                        </td>\n                        <td>\n                            <form action="{{ route("admin.emails.toggle", $notification->id) }}" method="POST" class="d-inline">\n                                @csrf\n                                <button type="submit" class="btn btn-sm btn-{{ $notification->is_enabled ? "success" : "secondary" }}">\n                                    {{ $notification->is_enabled ? "Enabled" : "Disabled" }}\n                                </button>\n                            </form>\n                        </td>\n                        <td>\n                            <a href="{{ route("admin.emails.edit", $notification->id) }}" class="btn btn-sm btn-warning">\n                                <i class="bi bi-pencil"></i> Edit\n                            </a>\n                        </td>\n                    </tr>\n                    @empty\n                    <tr>\n                        <td colspan="6" class="text-center">No email notifications found.</td>\n                    </tr>\n                    @endforelse\n                </tbody>\n            </table>\n        </div>\n    </div>\n</div>\n@endsection\n